<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
        <script src="https://code.highcharts.com/stock/highstock.js"></script>
        <script src="https://code.highcharts.com/stock/modules/data.js"></script>
        <script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
        <script src="https://code.highcharts.com/stock/modules/export-data.js"></script>
        <script src="meta_SHILLER_PE_RATIO_MONTH.js"></script>
        <script>
            $(document).ready(function() {
                $("#nav").load("nav.html");
                $("#bottom").load("bottom.html");
            });
        </script>
        <script>
            window.onload = function(){
                document.getElementById("name").innerHTML = 'Time Series: ' + meta["name"];
                document.getElementById("lastUpdate").innerHTML = 'Last update: ' +  meta["lastUpdate"];
                document.getElementById("lastValue").innerHTML = 'Last value: ' +  meta["lastValue"];
                document.getElementById("min").innerHTML = 'Min: ' +  meta["minValue"] + ' (' + meta["minDate"] + ')';
                document.getElementById("max").innerHTML = 'Max: ' +  meta["maxValue"] + ' (' + meta["maxDate"] + ')';
            };
        </script>
        <script>
            // https://demo-live-data.highcharts.com/aapl-historical.json
            // https://futureplaybook.github.io/demoHTML/data_SHILLER_PE_RATIO_MONTH.json
            Highcharts.getJSON('data_SHILLER_PE_RATIO_MONTH.json', function (data) {
            // Create the chart
                Highcharts.stockChart('container', {


                    rangeSelector: {
                        selected: 5
                    },

                    title: {
                        text: meta["name"]
                    },

                    subtitle: {
                        text: 'More details here'
                    },

                    yAxis: {
                        title: {
                            text: 'Exchange rate'
                        }
                    },

                    legend: {
                        enabled: true
                    },
                    credits: {
                        enabled: false
                    },

                    series: [{
                        name: meta["name"],
                        data: data,
                        id: 'dataseries',
                        tooltip: {
                            valueDecimals: 2
                        }
                        },
                        {
                        type: 'flags',
                        showInLegend: false,
                        data: [{
                            x: Date.UTC(2010, 11, 1),
                            title: 'A',
                            text: 'Some event with a description'
                        }, {
                            x: Date.UTC(2015, 11, 12),
                            title: 'B',
                            text: 'Some event with a description'
                        }, {
                            x: Date.UTC(2017, 11, 22),
                            title: 'C',
                            text: 'Some event with a description'
                        }],
                        onSeries: 'dataseries',
                        shape: 'squarepin',
                        width: 16
                    }
                        ]
                });
            });
        </script>
    </head>
    <body>
        <div id="nav"></div>
        <div id="container" style="width:100%; height:400px;"></div>
        <div id="name"></div>
        <div id="lastUpdate"></div>
        <div id="lastValue"></div>
        <div id="min"></div>
        <div id="max"></div>
        <div id="bottom"></div>
    </body>
</html>
